{"version":3,"file":"form_refer.js","names":["Webflow","push","$","document","off","submit","e","preventDefault","$form","this","$submit","buttonText","val","buttonWaitingText","attr","formMethod","formAction","formRedirect","formData","serialize","ajax","data","method","done","res","window","location","siblings","show","hide","fail","always","refer_phone","getElementById","autoFormatPhoneNumber","phoneNumberString","match","replace","join","err","oninput","target","value"],"sources":["pages/propcast/form_refer.js"],"mappings":"AACA,IAAIA,QAAUA,SAAW,GACzBA,QAAQC,MAAK,WAEXC,EAAEC,UAAUC,IAAI,UAGhBF,EAAE,eAAeG,QAAO,SAASC,GAC/BA,EAAEC,iBAEH,MAAMC,EAAQN,EAAEO,MACTC,EAAUR,EAAE,gBAAiBM,GAC7BG,EAAaD,EAAQE,MACrBC,EAAoBH,EAAQI,KAAK,aACjCC,EAAaP,EAAMM,KAAK,UACxBE,EAAaR,EAAMM,KAAK,UACxBG,EAAeT,EAAMM,KAAK,iBAC1BI,EAAWV,EAAMW,YAGnBN,GACFH,EAAQE,IAAIC,GAGdX,EAAEkB,KAAKJ,EAAY,CAClBK,KAAMH,EACLI,OAAQP,IAETQ,MAAMC,IAEDP,EAAgBQ,OAAOC,SAAWT,EAEvCT,EAEEmB,SAAS,gBAAgBC,OACxBD,SAAS,gBAAgBE,MAAM,IAElCC,MAAMN,IACLhB,EACEmB,SAAS,gBAAgBE,OACzBF,SAAS,gBAAgBC,MAAM,IAElCG,QAAO,KAENrB,EAAQE,IAAID,EAAW,GAE3B,GACF,IAGA,MAAMqB,YAAc7B,SAAS8B,eAAe,qBAK5C,SAASC,sBAAsBC,GAC7B,IACE,IACIC,GADW,GAAKD,GAAmBE,QAAQ,MAAO,IAClCD,MAAM,yCAE1B,MAAO,CADQA,EAAM,GAAK,MAAQ,GAE1BA,EAAM,GAAK,IAAK,GAChBA,EAAM,GACNA,EAAM,GAAK,KAAM,GACjBA,EAAM,GACNA,EAAM,GAAK,IAAK,GAChBA,EAAM,IAAIE,KAAK,GAIzB,CAFE,MAAMC,GACN,MAAO,EACT,CACF,CApBAP,YAAYQ,QAAWlC,IACrBA,EAAEmC,OAAOC,MAAQR,sBAAsB5B,EAAEmC,OAAOC,MAAK","sourcesContent":["// for most forms\r\nvar Webflow = Webflow || [];\r\nWebflow.push(function() {  \r\n  // unbind webflow form handling (keep this if you only want to affect specific forms)\r\n  $(document).off('submit');\r\n\r\n  /* Any form on the page */\r\n  $('#form_refer').submit(function(e) {\r\n    e.preventDefault();\r\n\r\n  \tconst $form = $(this); // The submitted form\r\n    const $submit = $('[type=submit]', $form); // Submit button of form\r\n    const buttonText = $submit.val(); // Original button text\r\n    const buttonWaitingText = $submit.attr('data-wait'); // Waiting button text value\r\n    const formMethod = $form.attr('method'); // Form method (where it submits to)\r\n    const formAction = $form.attr('action'); // Form action (GET/POST)\r\n    const formRedirect = $form.attr('data-redirect'); // Form redirect location\r\n    const formData = $form.serialize(); // Form data\r\n    \r\n    // Set waiting text\r\n    if (buttonWaitingText) {\r\n      $submit.val(buttonWaitingText); \r\n    }\r\n    \r\n    $.ajax(formAction, {\r\n    \tdata: formData,\r\n      method: formMethod\r\n    })\r\n    .done((res) => {\r\n      // If form redirect setting set, then use this and prevent any other actions\r\n      if (formRedirect) { window.location = formRedirect; return; }\r\n\r\n    \t$form\r\n      \t // optional hiding of form .hide()\r\n    \t\t.siblings('.w-form-done').show() // Show success\r\n      \t.siblings('.w-form-fail').hide(); // Hide failure\r\n    })\r\n    .fail((res) => {\r\n      $form\r\n      \t.siblings('.w-form-done').hide() // Hide success\r\n    \t  .siblings('.w-form-fail').show(); // show failure\r\n    })\r\n    .always(() => {\r\n      // Reset text\r\n      $submit.val(buttonText);\r\n    });\r\n  });\r\n});\r\n\r\n// Form phone formatter\r\nconst refer_phone = document.getElementById(\"refer_input-phone\")\r\nrefer_phone.oninput = (e) => {\r\n  e.target.value = autoFormatPhoneNumber(e.target.value)\r\n}\r\n\r\nfunction autoFormatPhoneNumber(phoneNumberString) {\r\n  try {\r\n    var cleaned = (\"\" + phoneNumberString).replace(/\\D/g, \"\");\r\n    var match = cleaned.match(/^(1|)?(\\d{0,3})?(\\d{0,3})?(\\d{0,4})?$/);\r\n    var intlCode = match[1] ? \"+1 \" : \"\";\r\n    return [intlCode, \r\n            match[2] ? \"(\": \"\",\r\n            match[2], \r\n            match[3] ? \") \": \"\",\r\n            match[3],\r\n            match[4] ? \"-\": \"\",\r\n            match[4]].join(\"\")\r\n    \r\n  } catch(err) {\r\n    return \"\";\r\n  }\r\n}"]}