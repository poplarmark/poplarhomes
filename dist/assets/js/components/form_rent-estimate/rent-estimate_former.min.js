<script>
console.log("INITIALIZED RENT ESTIMATE V27");const wf_form_main=document.getElementById("serviced-block_trigger-layer"),wf_form_unserviced=document.getElementById("unserviced-block_trigger-layer"),wf_form_empty=document.getElementById("emptyfield-block_trigger-layer"),form_rent_estimate=document.getElementById("form_rentestimate"),form_serviced=document.getElementById("form_serviced"),form_unserviced=document.getElementById("form_unserviced"),autocomplete_input=document.getElementById("pac_input"),property_type=document.getElementById("property-type"),bedroom_count=document.getElementById("rent-estimate_input-bedroom"),bathroom_count=document.getElementById("rent-estimate_input-bathroom"),rent_estimate_button=document.getElementById("rent-estimate_button"),serviced_input_firstname=document.getElementById("serviced_input-firstname"),serviced_input_lastname=document.getElementById("serviced_input-lastname"),serviced_input_email=document.getElementById("serviced_input-email"),serviced_input_phone=document.getElementById("serviced_input-phone"),unserviced_input_fullname=document.getElementById("unserviced_input-fullname"),unserviced_input_email=document.getElementById("unserviced_input-email"),unserviced_map=document.getElementById("unserviced_map"),autocomplete_options={componentRestrictions:{country:"us"}},pipeToGoogleSheet=function(e,t){$.ajax({url:e,method:"GET",dataType:"json",data:t,success:function(e){console.log("Google Sheet --\x3e",e)}})};function getGoogleAddressComponent(e,t,o){if(console.log(hasOwnProperty),e.length)for(var n=0;n<e.length;n++)if(e[n].hasOwnProperty("types"))for(var a=0;a<e[n].types.length;a++)if(e[n].types[a]===t)return e[n][o]}if(autocomplete_input){var autocomplete_component,autocomplete=new google.maps.places.Autocomplete(autocomplete_input,autocomplete_options);google.maps.event.addListener(autocomplete,"place_changed",(function(){let e=autocomplete.getPlace().address_components,t=document.getElementById("rent-estimate_input-postal-code");const o=getGoogleAddressComponent(e,"postal_code","short_name");t.value=o,"undefined"==t.value&&(t.value=""),autocomplete_component={city:getGoogleAddressComponent(e,"locality","long_name"),route:getGoogleAddressComponent(e,"route","short_name"),state:getGoogleAddressComponent(e,"administrative_area_level_1","short_name"),street_no:getGoogleAddressComponent(e,"street_number","long_name"),zip:t.value},t.addEventListener("change",(function(){let e=document.getElementsByClassName("error_message_zipcode")[0];checkZip(this.value)?(e.style.display="none",rent_estimate_button.disabled=!1,rent_estimate_button.style.opacity="1",autocomplete_component.zip=this.value,console.log("Updated zip_value:",this.value)):(rent_estimate_button.disabled=!0,rent_estimate_button.style.opacity="0.5",e.style.display="block")})),console.log("ADDRESS:",autocomplete_component)}))}function addProperty(e,t,o){fetch("https://www.poplarhomes.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`${o}`},body:JSON.stringify({query:`mutation {\n                  addProperty(input: {\n                      property: {\n                          type: ${e.type},\n                          propertyCategory: ${e.propertyCategory},\n                          numBeds: ${e.numBeds},\n                          numBaths: ${e.numBaths},\n                          street: "${e.street}",\n                          city: "${e.city}",\n                          state: "${e.state}",\n                          zipCode: "${e.zipCode}",\n                          country: "USA"\n                      },\n                      UTMCampaign: "${t.UTMCampaign}",\n                      UTMContent: "${t.UTMContent}",\n                      UTMMedium: "${t.UTMMedium}",\n                      UTMSource: "${t.UTMSource}",\n                      UTMTerm: "${t.UTMTerm}",\n                  }) {\n                      property {\n                          propertyID\n                          unitNumber\n                          name\n                          numBaths\n                          numBeds\n                          status\n                          type\n                          communityFeatures\n                          interiorFeatures\n                          exteriorFeatures\n                          appliances\n                          isFurnished\n                          petPolicy\n                          petInformation\n                          climateControls\n                          washerDryerType\n                          additionalRooms\n                          desiredLeaseRange\n                          storageType\n                          storageFee\n                          parkingTypes\n                          renterResponsibleUtilities\n                          ownerResponsibleUtilities\n                          latitude\n                          longitude\n                          totalArea\n                          street\n                          city\n                          state\n                          country\n                          county\n                          zipCode\n                      }\n                  }\n              }`})}).then((e=>e.json())).then((e=>{})).catch((e=>{console.log(e)}))}function registerOwner(e,t,o){fetch("https://www.poplarhomes.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:`mutation {\n                  registerOwner(input: {\n                      user: {\n                          firstName: "${e.firstName}",\n                          lastName: "${e.lastName}",\n                          email: "${e.email}",\n                          phone: "${e.phone}",\n                          UTMCampaign: "${o.UTMCampaign}",\n                          UTMContent: "${o.UTMContent}",\n                          UTMMedium: "${o.UTMMedium}",\n                          UTMSource: "${o.UTMSource}",\n                          UTMTerm: "${o.UTMTerm}",\n                          leadSource: ONERENT_WEBSITE_GET_RENT_ESTIMATE_LANDING_PAGE\n                      }\n                  }) {\n                  token\n                  }\n              }`})}).then((e=>e.json())).then((n=>{if(n.errors){let t=new Date,n={Timestamp:t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+(t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()),Name:`${e.firstName} ${e.lastName}`,Email:`${e.email}`,phone:`${e.phone}`,Location:autocomplete_input.value,"Submission Error":"true",utm_source:`WEB-${o.UTMSource}`,utm_campaign:`${o.UTMCampaign}`,utm_medium:`${o.UTMMedium}`,utm_content:`${o.UTMContent}`};return pipeToGoogleSheet("https://script.google.com/macros/s/AKfycbwdTw0XzSPs4Y1Fou6jdLToblFjZneJZGRd2EEowbOMpTgX5te8/exec",n),!1}let a=n.data.registerOwner.token;addProperty(t,o,a)})).catch((e=>{console.log(e)}))}function autocompleteBindLocation(){window.addEventListener("load",(function(){var e=document.getElementsByClassName("pac-container")[0];jQuery(e).detach().appendTo("#input_wrap-location"),console.log("pac_container loaded")})),window.addEventListener("load",(function(){$(document).ready((function(){$("#onload-estimate-js").each((function(){$(this).insertAfter($(this).parent().find(".pac-container")),console.log("pac_mover loader")}))}))}));document.getElementById("pac_input").onpaste=e=>e.preventDefault()}function checkZip(e){return/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e)}function checkEmail(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}function checkPhoneFormat(e){return/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(e)}$(document).ready((function(){autocompleteBindLocation(),phoneFormat(),form_rent_estimate.addEventListener("submit",(e=>{e.preventDefault();const t=["Accokeek","Alameda","Alamo","Albany","Alhambra","Alief","Aliso Viejo","Altadena","Alvin","Alviso","Andrews Air Force Base","Angleton","Annada","Annapolis Junction","Annapolis","Antelope","Antioch","Apex","Aquasco","Arcadia","Arnold","Arvada","Ashton","Atherton","Augusta","Aurora","Austin","Bacliff","Ballwin","Baltimore","Barker","Barnesville","Barnhart","Bastrop","Baytown","Beallsville","Beaufort","Bell Gardens","Bell","Bellaire","Bellevue","Bellflower","Belmont","Beltsville","Belvedere Tiburon","Berkeley","Bethesda","Beverly Hills","Bladensburg","Bloomington","Blue Diamond","Bonita","Bonsall","Bothell","Boulder City","Boulder","Bowie","Boyds","Brandywine","Brentwood","Bridgeton","Brighton","Brinklow","Brisbane","Brookeville","Broomfield","Bryn Mawr","Buda","Buena Park","Bunkerville","Burbank","Burlingame","Burtonsville","Byron","Cabin John","Cal Nev Ari","Campbell","Canoga Park","Canyon","Capistrano Beach","Capitol Heights","Capitola","Cardiff By The Sea","Carlsbad","Carmichael","Carson","Cary","Castro Valley","Catawissa","Cedar Creek","Cedar Hill","Cedar Park","Channelview","Chapel Hill","Charleston","Chatsworth","Cheltenham","Chesterfield","Chevy Chase","Chicago","Chino","Chula Vista","Churchton","Citrus Heights","City Of Industry","Claremont","Clarksburg","Clarksville","Clayton","Cleveland","Clinton","College Park","Colton","Columbia","Columbus","Commerce City","Compton","Concord","Conroe","Cooksville","Corona","Coronado","Corpus Christi","Corte Madera","Coupland","Coyote Springs","Coyote","Crockett","Crofton","Crosby","Crownsville","Crystal City","Culver City","Cupertino","Curtis Bay","Cypress","Daly City","Damascus","Dana Point","Danville","Davidsonville","Davis","Dayton","De Soto","Deale","Deer Park","Defiance","Del Mar","Del Valle","Denver","Derwood","Diablo","Dickerson","Dickinson","District Heights","Dittmer","Dodgertown","Downey","Dripping Springs","Duarte","Dublin","Dupont","Durham","Dutzow","Earth City","Eastlake","Edgewater","Edmonds","El Cajon","El Cerrito","El Dorado Hills","El Granada","El Monte","El Segundo","El Sobrante","El Toro","Elgin","Elk Grove","Elkridge","Ellicott City","Elsberry","Elverta","Emeryville","Encinitas","Englewood","Eolia","Escondido","Eugene","Eureka","Everett","Fair Oaks","Fallbrook","Fenton","Festus","Fletcher","Flinthill","Florence","Florissant","Foley","Folly Beach","Folsom","Fontana","Foristell","Fort George G Meade","Fort Washington","Freeport","Fremont","French Village","Fresno","Friendship","Friendswood","Fulton","Fuquay Varina","Gaithersburg","Galena Park","Galesville","Gambrills","Gardena","Garner","Garrett Park","Georgetown","Gerald","Germantown","Gibson Island","Gilroy","Glen Burnie","Glen Echo","Glencoe","Glendale","Glenelg","Glenn Dale","Glenwood","Goose Creek","Granada Hills","Grand Terrace","Granite Bay","Gray Summit","Greenbelt","Greenbrae","Grover","Grubville","Guasti","Half Moon Bay","Hanahan","Hanover","Harbor City","Harker Heights","Harmans","Harwood","Hawk Point","Hawthorne","Hayward","Hazelwood","Hempstead","Henderson","Herculaneum","Hercules","Hermosa Beach","High Hill","High Ridge","Highland","Highlands","Hillsboro","Hitchcock","Holly Springs","Hood","House Springs","Houston","Huffman","Humble","Huntington Park","Hutto","Hyattsville","Imperial Beach","Imperial","Indian Springs","Inglewood","Irvine","Isle Of Palms","Issaquah","Jarrell","Jean","Jessup","Johns Island","Jonesburg","Katy","Kemah","Kenmore","Kensington","Kent","Kentfield","Killeen","Kimmswick","Kingwood","Kirkland","Knightdale","Kyle","La Canada Flintridge","La Crescenta","La Jolla","La Marque","La Mesa","La Porte","Labadie","Ladera Ranch","Ladson","Lafayette","Laguna Beach","Laguna Hills","Laguna Niguel","Laguna Woods","Lake Forest","Lake Saint Louis","Lakewood","Lanham","Larkspur","Las Vegas","Laughlin","Laurel","Lawndale","League City","Leander","Lemon Grove","Leslie","Liberty Hill","Liguori","Linthicum Heights","Lisbon","Littleton","Livermore","Liverpool","Logandale","Loma Linda","Lomita","Lonedell","Long Beach","Los Altos","Los Angeles","Los Gatos","Luebbering","Lynnwood","Lynwood","Manchaca","Manhattan Beach","Manor","Manvel","Mapaville","March Air Reserve Base","Marina Del Rey","Marthasville","Martinez","Maryland Heights","Mather","Mayo","Maywood","Mcclellan","Medina","Menlo Park","Mercer Island","Mesquite","Mill Creek","Mill Valley","Millbrae","Millersville","Milpitas","Mira Loma","Mission Hills","Mission Viejo","Missouri City","Moapa","Moncks Corner","Moncure","Monrovia","Montara","Montclair","Montebello","Monterey Park","Montgomery City","Montgomery Village","Montrose","Moraga","Moreno Valley","Morgan Hill","Morrisville","Moscow Mills","Moss Beach","Mount Pleasant","Mount Rainier","Mountain View","Mountlake Terrace","Mukilteo","Nashville","National City","Nellis Afb","New Florence","New Haven","New Hill","New Melle","Newark","Norco","North Charleston","North Highlands","North Hills","North Hollywood","North Houston","North Las Vegas","Northridge","O'Fallon","Oakland","Oceanside","Odenton","Old Monroe","Olney","Ontario","Orangevale","Orinda","Overton","Oxon Hill","Pacific","Pacifica","Pacoima","Palo Alto","Palos Verdes Peninsula","Panorama City","Paramount","Pasadena","Patton","Pearland","Perris","Pevely","Pflugerville","Pico Rivera","Piedmont","Pinole","Pittsburg","Playa Del Rey","Pleasant Hill","Pleasanton","Pomona","Poolesville","Port Costa","Portage Des Sioux","Porter Ranch","Porter","Portland","Potomac","Poway","Raleigh","Rancho Cordova","Rancho Cucamonga","Rancho Palos Verdes","Rancho Santa Fe","Rancho Santa Margarita","Redlands","Redmond","Redondo Beach","Redwood City","Renton","Represa","Rescue","Reseda","Rialto","Richmond","Richwoods","Rio Linda","Riva","Riverdale","Riverside","Robertsville","Rocklin","Rockville","Rodeo","Rolesville","Rosemead","Rosenberg","Roseville","Rosharon","Ross","Round Rock","Sacramento","Saint Albans","Saint Ann","Saint Charles","Saint Clair","Saint Louis","Saint Peters","Salado","Sammamish","San Anselmo","San Antonio","San Bernardino","San Bruno","San Carlos","San Clemente","San Diego","San Dimas","San Fernando","San Francisco","San Gabriel","San Jose","San Juan Capistrano","San Leandro","Saint Louis","San Lorenzo","San Luis Rey","San Marcos","San Marino","San Martin","San Mateo","San Pablo","San Pedro","San Quentin","San Rafael","San Ramon","San Ysidro","Sandy Spring","Santa Clara","Santa Cruz","Santa Fe","Santa Monica","Santee","Saratoga","Sausalito","Savage","Scotts Valley","Seabrook","Seahurst","Searchlight","Seattle","Severn","Severna Park","Shady Side","Sierra Madre","Signal Hill","Silex","Silver Spring","Simpsonville","Sloan","Solana Beach","South El Monte","South Gate","South Houston","South Pasadena","South San Francisco","Spencerville","Spring Valley","Spring","Stafford","Stanford","Stanton","Studio City","St. Louis","Sugar Land","Suitland","Sullivan","Sullivans Island","Summerville","Sun Valley","Sunnyvale","Sunol","Sylmar","Takoma Park","Tarzana","Taylor","Temple City","Temple Hills","Temple","Texas City","The Lakes","Thompsons","Toluca Lake","Tomball","Torrance","Tracy","Tracys Landing","Troy","Truxton","Tujunga","Union City","Union","Universal City","Upland","Upper Marlboro","Valencia","Vallejo","Valles Mines","Valley Park","Valley Village","Van Nuys","Venice","Verdugo City","Villa Ridge","Vista","Wake Forest","Waller","Walnut Creek","Warrenton","Washington Grove","Washington","Webster","Wendell","Wentzville","West Alton","West Columbia","West Friendship","West Hills","West Hollywood","West River","West Sacramento","Westminster","Whiteside","Willow Spring","Wilmington","Winfield","Winnetka","Winston-Salem","Woodbine","Woodland Hills","Woodland","Woodstock","Wright City","Yolo","Zebulon"].find((e=>e===autocomplete_component.city));if(autocomplete_component?.state&&("TX"===autocomplete_component.state||"SC"===autocomplete_component.state||"MO"===autocomplete_component.state||"IL"===autocomplete_component.state||"NC"===autocomplete_component.state||"OH"===autocomplete_component.state)&&autocomplete_component?.city&&t){wf_form_main.style.display="block;";document.querySelector("#serviced-block_trigger-layer .modal_component > .modal_heading").innerHTML="One of our local partners serves your area!"}autocomplete_component?.state&&("OR"===autocomplete_component.state||"TN"===autocomplete_component.state||"CA"===autocomplete_component.state||"WA"===autocomplete_component.state||"CO"===autocomplete_component.state||"NV"===autocomplete_component.state||"MD"===autocomplete_component.state)||autocomplete_component?.city&&("Las Vegas"===autocomplete_component.city||t)?wf_form_main.style.display="block":($(".address-map").attr("src","https://www.google.com/maps?q="+autocomplete_input.value+"&output=embed"),wf_form_unserviced.style.display="block")})),form_serviced.addEventListener("submit",(e=>{e.preventDefault();let t=document.querySelector("#serviced-block_trigger-layer .modal_component > .modal_button-close"),o=document.getElementsByClassName("modal_loading-box")[0],n=document.querySelector(".modal_component > .modal_heading"),a=document.querySelector("#serviced_input-firstname + ._wf-error-message"),l=document.querySelector("#serviced_input-lastname + ._wf-error-message"),r=document.querySelector("#serviced_input-email + ._wf-error-message"),i=document.querySelector("#serviced_input-phone + ._wf-error-message");if(""==serviced_input_firstname.value||null==serviced_input_firstname)a.style.opacity="1";else if(""==serviced_input_lastname.value||null==serviced_input_lastname)l.style.opacity="1";else if(""==serviced_input_email.value||null==serviced_input_email.value)r.style.opacity="1";else if(0==checkEmail(serviced_input_email.value))r.style.opacity="1",r.innerHTML="Invalid mail";else if(""==serviced_input_phone.value||null==serviced_input_phone.value)i.style.opacity="1";else{if(0!=checkPhoneFormat(serviced_input_phone.value)){let e={type:property_type.value,propertyCategory:$("#property-type option:selected").attr("category_value"),numBeds:bedroom_count.value,numBaths:bathroom_count.value,street:autocomplete_component?autocomplete_component.street_no+" "+autocomplete_component.route:autocomplete_input.value,city:autocomplete_component&&autocomplete_component.city?autocomplete_component.city:"",state:autocomplete_component?autocomplete_component.state:"",zipCode:autocomplete_component?autocomplete_component.zip:""},s={firstName:serviced_input_firstname.value,lastName:serviced_input_lastname.value,email:serviced_input_email.value,phone:serviced_input_phone.value},u={UTMCampaign:sessionStorage.getItem("utm_campaign")?sessionStorage.getItem("utm_campaign"):"",UTMContent:sessionStorage.getItem("utm_content")?sessionStorage.getItem("utm_content"):document.referrer,UTMMedium:sessionStorage.getItem("utm_medium")?sessionStorage.getItem("utm_medium"):"rent-estimate-popup",UTMSource:sessionStorage.getItem("utm_source")?sessionStorage.getItem("utm_source"):"organic",UTMTerm:sessionStorage.getItem("utm_term")?sessionStorage.getItem("utm_term"):""};return n.style.display="none",t.style.display="none",form_serviced.style.display="none",o.style.display="flex",a.style.opacity="0",l.style.opacity="0",r.style.opacity="0",i.style.opacity="0",console.log(u),registerOwner(s,e,u),form_rent_estimate.reset(),form_serviced.reset(),!1}i.style.opacity="1",i.innerHTML="Invalid number"}})),form_unserviced.addEventListener("submit",(e=>{e.preventDefault();let t=document.querySelector("#unserviced-block_trigger-layer .modal_component > .modal_button-close"),o=document.getElementsByClassName("modal_loading-box")[1],n=document.querySelector(".modal_component > .modal_heading.for-modal-unserviced"),a=document.querySelector(".modal_component > .text-color-white.for-modal-unserviced"),l=document.querySelector("#unserviced_input-fullname + ._wf-error-message"),r=document.querySelector("#unserviced_input-email + ._wf-error-message");if(""==unserviced_input_fullname.value||null==unserviced_input_fullname)l.style.opacity="1";else if(""==unserviced_input_email.value||null==unserviced_input_email.value)r.style.opacity="1";else{if(0!=checkEmail(unserviced_input_email.value)){const e=unserviced_input_fullname.value,i=unserviced_input_email.value,s=autocomplete_input.value,u=property_type.value,m=bedroom_count.value,c=bathroom_count.value,d="WEB-organic",p="rent estimate outbound form",y="",g="",_=new Date,v={Timestamp:_.getFullYear()+"-"+(_.getMonth()+1)+"-"+_.getDate()+" "+(_.getHours()+":"+_.getMinutes()+":"+_.getSeconds()),utm_source:d,utm_campaign:y,utm_medium:p,utm_content:g,"Full Name":e,Email:i,"Property Address":s,"Property Type":u,Bedrooms:m,Bathrooms:c};return unserviced_map.style.display="none",n.style.display="none",a.style.display="none",t.style.display="none",form_unserviced.style.display="none",o.style.display="flex",l.style.opacity="0",r.style.opacity="0",pipeToGoogleSheet("https://script.google.com/macros/s/AKfycbwZSqwAs6FBluPYSz1kTQwVRFCA4KDXV85rvFUcIVplO97w_Mq6ZW2D2cm3afKpnnvG/exec",v),form_rent_estimate.reset(),form_unserviced.reset(),!1}r.style.opacity="1",r.innerHTML="Invalid email"}}))}));
//# sourceMappingURL=rent-estimate_former.min.js.map
</script>